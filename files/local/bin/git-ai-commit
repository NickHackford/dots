#!/usr/bin/env bash

# Get staged changes
staged_diff=$(git diff --cached)

# Check if there are any staged changes
if [ -z "$staged_diff" ]; then
    echo "No staged changes to commit"
    exit 1
fi

# Generate commit message using Claude
commit_message=$(echo "$staged_diff" | opencode "run" "Generate a concise commit message for these staged changes. Return only the commit message, no explanations or formatting.")

# Commit with the generated message
git commit -m "$commit_message"
